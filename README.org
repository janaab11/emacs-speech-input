#+TITLE: Emacs Speech Input

#+HTML: <img alt="GitHub" src="https://img.shields.io/github/license/lepisma/emacs-speech-input?style=flat-square">

Personal set of tools for involving speech input and output while working with
Emacs. Once stable, this place should provide a consistent API involving various
kinds of speech based acts.

* Building
Currently the program has following dependencies:

1. fftw3
2. sndfile
3. cmocka for testing
4. libsoundio

Once libraries are present (default-ish paths), run ~make~ to build the
~esi-core.so~.  Emacs dependencies are managed using cask so you will need to do a
~cask install~.

For running tests, do ~make test~.

* Usage

** Recording
For a flight recorder type always on background recording, use the following:

#+begin_src emacs-lisp
  (require 'esi-core)
  (require 'f)

  ;; Start background recording with 10 seconds buffer
  (setq instream (esi-core--start-background-recording 16000 10))

  ;; Save last 10 seconds of audio to a file
  (let ((pcm-bytes (esi-core--read-background-recording-buffer instream)))
    (f-write-text data 'utf-8 "output-file.pcm"))

  (esi-core--stop-background-recording instream)
#+end_src

The audio can then be played back using something like the following:

#+begin_src shell
play -t raw -r 16k -c 2 -b 16 -e signed -L output-file.pcm
#+END_SRC
